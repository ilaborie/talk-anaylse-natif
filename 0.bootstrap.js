(window["webpackJsonp"] = window["webpackJsonp"] || []).push([[0],{

/***/ "../pkg/taquin_rust_wasm.js":
/*!**********************************!*\
  !*** ../pkg/taquin_rust_wasm.js ***!
  \**********************************/
/*! exports provided: Move, Moves, Position, Taquin, __wbg_new_59cb74e423758ede, __wbg_stack_558ba5917b466edd, __wbg_error_4bb6c2a97407129a, __wbindgen_object_drop_ref, __wbg_random_d45f566bef640e60, __wbindgen_throw */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"Move\", function() { return Move; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"Moves\", function() { return Moves; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"Position\", function() { return Position; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"Taquin\", function() { return Taquin; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"__wbg_new_59cb74e423758ede\", function() { return __wbg_new_59cb74e423758ede; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"__wbg_stack_558ba5917b466edd\", function() { return __wbg_stack_558ba5917b466edd; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"__wbg_error_4bb6c2a97407129a\", function() { return __wbg_error_4bb6c2a97407129a; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"__wbindgen_object_drop_ref\", function() { return __wbindgen_object_drop_ref; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"__wbg_random_d45f566bef640e60\", function() { return __wbg_random_d45f566bef640e60; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"__wbindgen_throw\", function() { return __wbindgen_throw; });\n/* harmony import */ var _taquin_rust_wasm_bg_wasm__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./taquin_rust_wasm_bg.wasm */ \"../pkg/taquin_rust_wasm_bg.wasm\");\n\n\nconst heap = new Array(32).fill(undefined);\n\nheap.push(undefined, null, true, false);\n\nfunction getObject(idx) { return heap[idx]; }\n\nlet heap_next = heap.length;\n\nfunction dropObject(idx) {\n    if (idx < 36) return;\n    heap[idx] = heap_next;\n    heap_next = idx;\n}\n\nfunction takeObject(idx) {\n    const ret = getObject(idx);\n    dropObject(idx);\n    return ret;\n}\n\nconst lTextDecoder = typeof TextDecoder === 'undefined' ? __webpack_require__(/*! util */ \"./node_modules/util/util.js\").TextDecoder : TextDecoder;\n\nlet cachedTextDecoder = new lTextDecoder('utf-8', { ignoreBOM: true, fatal: true });\n\ncachedTextDecoder.decode();\n\nlet cachegetUint8Memory0 = null;\nfunction getUint8Memory0() {\n    if (cachegetUint8Memory0 === null || cachegetUint8Memory0.buffer !== _taquin_rust_wasm_bg_wasm__WEBPACK_IMPORTED_MODULE_0__[\"memory\"].buffer) {\n        cachegetUint8Memory0 = new Uint8Array(_taquin_rust_wasm_bg_wasm__WEBPACK_IMPORTED_MODULE_0__[\"memory\"].buffer);\n    }\n    return cachegetUint8Memory0;\n}\n\nfunction getStringFromWasm0(ptr, len) {\n    return cachedTextDecoder.decode(getUint8Memory0().subarray(ptr, ptr + len));\n}\n\nfunction _assertClass(instance, klass) {\n    if (!(instance instanceof klass)) {\n        throw new Error(`expected instance of ${klass.name}`);\n    }\n    return instance.ptr;\n}\n\nfunction addHeapObject(obj) {\n    if (heap_next === heap.length) heap.push(heap.length + 1);\n    const idx = heap_next;\n    heap_next = heap[idx];\n\n    heap[idx] = obj;\n    return idx;\n}\n\nlet WASM_VECTOR_LEN = 0;\n\nconst lTextEncoder = typeof TextEncoder === 'undefined' ? __webpack_require__(/*! util */ \"./node_modules/util/util.js\").TextEncoder : TextEncoder;\n\nlet cachedTextEncoder = new lTextEncoder('utf-8');\n\nconst encodeString = (typeof cachedTextEncoder.encodeInto === 'function'\n    ? function (arg, view) {\n    return cachedTextEncoder.encodeInto(arg, view);\n}\n    : function (arg, view) {\n    const buf = cachedTextEncoder.encode(arg);\n    view.set(buf);\n    return {\n        read: arg.length,\n        written: buf.length\n    };\n});\n\nfunction passStringToWasm0(arg, malloc, realloc) {\n\n    if (realloc === undefined) {\n        const buf = cachedTextEncoder.encode(arg);\n        const ptr = malloc(buf.length);\n        getUint8Memory0().subarray(ptr, ptr + buf.length).set(buf);\n        WASM_VECTOR_LEN = buf.length;\n        return ptr;\n    }\n\n    let len = arg.length;\n    let ptr = malloc(len);\n\n    const mem = getUint8Memory0();\n\n    let offset = 0;\n\n    for (; offset < len; offset++) {\n        const code = arg.charCodeAt(offset);\n        if (code > 0x7F) break;\n        mem[ptr + offset] = code;\n    }\n\n    if (offset !== len) {\n        if (offset !== 0) {\n            arg = arg.slice(offset);\n        }\n        ptr = realloc(ptr, len, len = offset + arg.length * 3);\n        const view = getUint8Memory0().subarray(ptr + offset, ptr + len);\n        const ret = encodeString(arg, view);\n\n        offset += ret.written;\n    }\n\n    WASM_VECTOR_LEN = offset;\n    return ptr;\n}\n\nlet cachegetInt32Memory0 = null;\nfunction getInt32Memory0() {\n    if (cachegetInt32Memory0 === null || cachegetInt32Memory0.buffer !== _taquin_rust_wasm_bg_wasm__WEBPACK_IMPORTED_MODULE_0__[\"memory\"].buffer) {\n        cachegetInt32Memory0 = new Int32Array(_taquin_rust_wasm_bg_wasm__WEBPACK_IMPORTED_MODULE_0__[\"memory\"].buffer);\n    }\n    return cachegetInt32Memory0;\n}\n\nfunction notDefined(what) { return () => { throw new Error(`${what} is not defined`); }; }\n/**\n*/\nconst Move = Object.freeze({ Up:0,Right:1,Down:2,Left:3, });\n/**\n*/\nclass Moves {\n\n    static __wrap(ptr) {\n        const obj = Object.create(Moves.prototype);\n        obj.ptr = ptr;\n\n        return obj;\n    }\n\n    free() {\n        const ptr = this.ptr;\n        this.ptr = 0;\n\n        _taquin_rust_wasm_bg_wasm__WEBPACK_IMPORTED_MODULE_0__[\"__wbg_moves_free\"](ptr);\n    }\n    /**\n    * @returns {number}\n    */\n    moves() {\n        var ret = _taquin_rust_wasm_bg_wasm__WEBPACK_IMPORTED_MODULE_0__[\"moves_moves\"](this.ptr);\n        return ret;\n    }\n    /**\n    * @returns {number}\n    */\n    size() {\n        var ret = _taquin_rust_wasm_bg_wasm__WEBPACK_IMPORTED_MODULE_0__[\"moves_size\"](this.ptr);\n        return ret >>> 0;\n    }\n}\n/**\n*/\nclass Position {\n\n    static __wrap(ptr) {\n        const obj = Object.create(Position.prototype);\n        obj.ptr = ptr;\n\n        return obj;\n    }\n\n    free() {\n        const ptr = this.ptr;\n        this.ptr = 0;\n\n        _taquin_rust_wasm_bg_wasm__WEBPACK_IMPORTED_MODULE_0__[\"__wbg_position_free\"](ptr);\n    }\n    /**\n    * @returns {number}\n    */\n    get row() {\n        var ret = _taquin_rust_wasm_bg_wasm__WEBPACK_IMPORTED_MODULE_0__[\"__wbg_get_position_row\"](this.ptr);\n        return ret;\n    }\n    /**\n    * @param {number} arg0\n    */\n    set row(arg0) {\n        _taquin_rust_wasm_bg_wasm__WEBPACK_IMPORTED_MODULE_0__[\"__wbg_set_position_row\"](this.ptr, arg0);\n    }\n    /**\n    * @returns {number}\n    */\n    get column() {\n        var ret = _taquin_rust_wasm_bg_wasm__WEBPACK_IMPORTED_MODULE_0__[\"__wbg_get_position_column\"](this.ptr);\n        return ret;\n    }\n    /**\n    * @param {number} arg0\n    */\n    set column(arg0) {\n        _taquin_rust_wasm_bg_wasm__WEBPACK_IMPORTED_MODULE_0__[\"__wbg_set_position_column\"](this.ptr, arg0);\n    }\n}\n/**\n*/\nclass Taquin {\n\n    static __wrap(ptr) {\n        const obj = Object.create(Taquin.prototype);\n        obj.ptr = ptr;\n\n        return obj;\n    }\n\n    free() {\n        const ptr = this.ptr;\n        this.ptr = 0;\n\n        _taquin_rust_wasm_bg_wasm__WEBPACK_IMPORTED_MODULE_0__[\"__wbg_taquin_free\"](ptr);\n    }\n    /**\n    * @param {number} size\n    * @returns {Taquin}\n    */\n    static new(size) {\n        var ret = _taquin_rust_wasm_bg_wasm__WEBPACK_IMPORTED_MODULE_0__[\"taquin_new\"](size);\n        return Taquin.__wrap(ret);\n    }\n    /**\n    * @returns {number}\n    */\n    size() {\n        var ret = _taquin_rust_wasm_bg_wasm__WEBPACK_IMPORTED_MODULE_0__[\"taquin_size\"](this.ptr);\n        return ret;\n    }\n    /**\n    * @returns {number}\n    */\n    tiles() {\n        var ret = _taquin_rust_wasm_bg_wasm__WEBPACK_IMPORTED_MODULE_0__[\"taquin_tiles\"](this.ptr);\n        return ret;\n    }\n    /**\n    * @returns {boolean}\n    */\n    is_solved() {\n        var ret = _taquin_rust_wasm_bg_wasm__WEBPACK_IMPORTED_MODULE_0__[\"taquin_is_solved\"](this.ptr);\n        return ret !== 0;\n    }\n    /**\n    * @param {number} user_move\n    * @returns {boolean}\n    */\n    move_hole(user_move) {\n        var ret = _taquin_rust_wasm_bg_wasm__WEBPACK_IMPORTED_MODULE_0__[\"taquin_move_hole\"](this.ptr, user_move);\n        return ret !== 0;\n    }\n    /**\n    * @param {Position} position\n    * @returns {number | undefined}\n    */\n    move_from_position(position) {\n        _assertClass(position, Position);\n        var ptr0 = position.ptr;\n        position.ptr = 0;\n        var ret = _taquin_rust_wasm_bg_wasm__WEBPACK_IMPORTED_MODULE_0__[\"taquin_move_from_position\"](this.ptr, ptr0);\n        return ret === 4 ? undefined : ret;\n    }\n    /**\n    * @param {number} user_move\n    * @param {Position} hole_position\n    * @returns {boolean}\n    */\n    is_valid(user_move, hole_position) {\n        _assertClass(hole_position, Position);\n        var ptr0 = hole_position.ptr;\n        hole_position.ptr = 0;\n        var ret = _taquin_rust_wasm_bg_wasm__WEBPACK_IMPORTED_MODULE_0__[\"taquin_is_valid\"](this.ptr, user_move, ptr0);\n        return ret !== 0;\n    }\n    /**\n    * @param {Position} position\n    * @returns {number}\n    */\n    get_index(position) {\n        _assertClass(position, Position);\n        var ptr0 = position.ptr;\n        position.ptr = 0;\n        var ret = _taquin_rust_wasm_bg_wasm__WEBPACK_IMPORTED_MODULE_0__[\"taquin_get_index\"](this.ptr, ptr0);\n        return ret >>> 0;\n    }\n    /**\n    * @param {number} index\n    * @returns {Position}\n    */\n    get_position(index) {\n        var ret = _taquin_rust_wasm_bg_wasm__WEBPACK_IMPORTED_MODULE_0__[\"taquin_get_position\"](this.ptr, index);\n        return Position.__wrap(ret);\n    }\n    /**\n    * @returns {Position}\n    */\n    find_hole() {\n        var ret = _taquin_rust_wasm_bg_wasm__WEBPACK_IMPORTED_MODULE_0__[\"taquin_find_hole\"](this.ptr);\n        return Position.__wrap(ret);\n    }\n    /**\n    * @param {number} count\n    */\n    shuffle(count) {\n        _taquin_rust_wasm_bg_wasm__WEBPACK_IMPORTED_MODULE_0__[\"taquin_shuffle\"](this.ptr, count);\n    }\n    /**\n    * @returns {Moves}\n    */\n    solve() {\n        var ret = _taquin_rust_wasm_bg_wasm__WEBPACK_IMPORTED_MODULE_0__[\"taquin_solve\"](this.ptr);\n        return Moves.__wrap(ret);\n    }\n}\n\nconst __wbg_new_59cb74e423758ede = function() {\n    var ret = new Error();\n    return addHeapObject(ret);\n};\n\nconst __wbg_stack_558ba5917b466edd = function(arg0, arg1) {\n    var ret = getObject(arg1).stack;\n    var ptr0 = passStringToWasm0(ret, _taquin_rust_wasm_bg_wasm__WEBPACK_IMPORTED_MODULE_0__[\"__wbindgen_malloc\"], _taquin_rust_wasm_bg_wasm__WEBPACK_IMPORTED_MODULE_0__[\"__wbindgen_realloc\"]);\n    var len0 = WASM_VECTOR_LEN;\n    getInt32Memory0()[arg0 / 4 + 1] = len0;\n    getInt32Memory0()[arg0 / 4 + 0] = ptr0;\n};\n\nconst __wbg_error_4bb6c2a97407129a = function(arg0, arg1) {\n    try {\n        console.error(getStringFromWasm0(arg0, arg1));\n    } finally {\n        _taquin_rust_wasm_bg_wasm__WEBPACK_IMPORTED_MODULE_0__[\"__wbindgen_free\"](arg0, arg1);\n    }\n};\n\nconst __wbindgen_object_drop_ref = function(arg0) {\n    takeObject(arg0);\n};\n\nconst __wbg_random_d45f566bef640e60 = typeof Math.random == 'function' ? Math.random : notDefined('Math.random');\n\nconst __wbindgen_throw = function(arg0, arg1) {\n    throw new Error(getStringFromWasm0(arg0, arg1));\n};\n\n\n\n//# sourceURL=webpack:///../pkg/taquin_rust_wasm.js?");

/***/ }),

/***/ "../pkg/taquin_rust_wasm_bg.wasm":
/*!***************************************!*\
  !*** ../pkg/taquin_rust_wasm_bg.wasm ***!
  \***************************************/
/*! exports provided: memory, __wbg_moves_free, moves_moves, moves_size, __wbg_position_free, __wbg_get_position_row, __wbg_set_position_row, __wbg_get_position_column, __wbg_set_position_column, __wbg_taquin_free, taquin_new, taquin_size, taquin_tiles, taquin_is_solved, taquin_move_hole, taquin_move_from_position, taquin_is_valid, taquin_get_index, taquin_get_position, taquin_find_hole, taquin_shuffle, taquin_solve, __wbindgen_free, __wbindgen_malloc, __wbindgen_realloc */
/***/ (function(module, exports, __webpack_require__) {

eval("\"use strict\";\n// Instantiate WebAssembly module\nvar wasmExports = __webpack_require__.w[module.i];\n__webpack_require__.r(exports);\n// export exports from WebAssembly module\nfor(var name in wasmExports) if(name != \"__webpack_init__\") exports[name] = wasmExports[name];\n// exec imports from WebAssembly module (for esm order)\n/* harmony import */ var m0 = __webpack_require__(/*! ./taquin_rust_wasm.js */ \"../pkg/taquin_rust_wasm.js\");\n\n\n// exec wasm module\nwasmExports[\"__webpack_init__\"]()\n\n//# sourceURL=webpack:///../pkg/taquin_rust_wasm_bg.wasm?");

/***/ }),

/***/ "./index.js":
/*!******************!*\
  !*** ./index.js ***!
  \******************/
/*! no exports provided */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var taquin_rust_wasm__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! taquin_rust_wasm */ \"../pkg/taquin_rust_wasm.js\");\n/* harmony import */ var _mkp_taquin__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./mkp-taquin */ \"./mkp-taquin.js\");\n\n\n\n// Register WebComponent\ncustomElements.define('mkp-taquin', _mkp_taquin__WEBPACK_IMPORTED_MODULE_1__[\"MkpTaquinElt\"]);\n\n// Actions\nconst keyActions = {\n    ArrowUp: (taquin) => taquin.move(taquin_rust_wasm__WEBPACK_IMPORTED_MODULE_0__[\"Move\"].Up),\n    ArrowRight: (taquin) => taquin.move(taquin_rust_wasm__WEBPACK_IMPORTED_MODULE_0__[\"Move\"].Right),\n    ArrowDown: (taquin) => taquin.move(taquin_rust_wasm__WEBPACK_IMPORTED_MODULE_0__[\"Move\"].Down),\n    ArrowLeft: (taquin) => taquin.move(taquin_rust_wasm__WEBPACK_IMPORTED_MODULE_0__[\"Move\"].Left)\n};\n\n// Event Bindings\ndocument.body.addEventListener('keyup', (event) => {\n    const action = keyActions[event.key];\n    if (action) {\n        document.body.querySelectorAll('mkp-taquin')\n            .forEach(action);\n    }\n});\n\n\n//# sourceURL=webpack:///./index.js?");

/***/ }),

/***/ "./mkp-taquin.js":
/*!***********************!*\
  !*** ./mkp-taquin.js ***!
  \***********************/
/*! exports provided: MkpTaquinElt */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"MkpTaquinElt\", function() { return MkpTaquinElt; });\n/* harmony import */ var taquin_rust_wasm__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! taquin_rust_wasm */ \"../pkg/taquin_rust_wasm.js\");\n/* harmony import */ var taquin_rust_wasm_taquin_rust_wasm_bg__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! taquin_rust_wasm/taquin_rust_wasm_bg */ \"../pkg/taquin_rust_wasm_bg.wasm\");\n/* harmony import */ var _taquin_css__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./taquin.css */ \"./taquin.css\");\n\n\n\n\nconst states = ['init', 'game', 'win'];\n\nconst allMoves = [];\nallMoves[taquin_rust_wasm__WEBPACK_IMPORTED_MODULE_0__[\"Move\"].Up] = taquin_rust_wasm__WEBPACK_IMPORTED_MODULE_0__[\"Move\"].Up;\nallMoves[taquin_rust_wasm__WEBPACK_IMPORTED_MODULE_0__[\"Move\"].Right] = taquin_rust_wasm__WEBPACK_IMPORTED_MODULE_0__[\"Move\"].Right;\nallMoves[taquin_rust_wasm__WEBPACK_IMPORTED_MODULE_0__[\"Move\"].Down] = taquin_rust_wasm__WEBPACK_IMPORTED_MODULE_0__[\"Move\"].Down;\nallMoves[taquin_rust_wasm__WEBPACK_IMPORTED_MODULE_0__[\"Move\"].Left] = taquin_rust_wasm__WEBPACK_IMPORTED_MODULE_0__[\"Move\"].Left;\n\nconst moveLabels = [];\nmoveLabels[taquin_rust_wasm__WEBPACK_IMPORTED_MODULE_0__[\"Move\"].Up] = '⬆️';\nmoveLabels[taquin_rust_wasm__WEBPACK_IMPORTED_MODULE_0__[\"Move\"].Right] = '➡️';\nmoveLabels[taquin_rust_wasm__WEBPACK_IMPORTED_MODULE_0__[\"Move\"].Down] = '⬇️';\nmoveLabels[taquin_rust_wasm__WEBPACK_IMPORTED_MODULE_0__[\"Move\"].Left] = '⬅️';\n\nconst moveClassName = [];\nmoveClassName[taquin_rust_wasm__WEBPACK_IMPORTED_MODULE_0__[\"Move\"].Up] = 'up';\nmoveClassName[taquin_rust_wasm__WEBPACK_IMPORTED_MODULE_0__[\"Move\"].Right] = 'right';\nmoveClassName[taquin_rust_wasm__WEBPACK_IMPORTED_MODULE_0__[\"Move\"].Down] = 'down';\nmoveClassName[taquin_rust_wasm__WEBPACK_IMPORTED_MODULE_0__[\"Move\"].Left] = 'left';\n\nconst delay = (delayInMs, block) => new Promise(resolve => {\n    setTimeout(function () {\n        resolve(block && block());\n    }, delayInMs);\n});\n\nfunction createButtonElement(label, className, clickEvent) {\n    const btn = document.createElement(\"button\");\n    btn.type = 'button';\n    if (label) {\n        btn.textContent = label;\n    }\n\n    if (className) {\n        btn.classList.add(className);\n    }\n\n    if (clickEvent) {\n        btn.addEventListener('click', clickEvent);\n    }\n\n    return btn;\n}\n\n// Web component\nclass MkpTaquinElt extends HTMLElement {\n\n    get size() {\n        return this.getAttribute(\"size\") || 3;\n    }\n\n    constructor() {\n        super();\n        this.taquin = null;\n        this.score = 0;\n        this.state = 'init';\n        this.buttons = {};\n    }\n\n    connectedCallback() {\n        console.log('connectedCallback');\n        this.init();\n    }\n\n    adoptedCallback() {\n        console.log('adoptedCallback');\n        this.init();\n    }\n\n    static get observedAttributes() {\n        return ['size'];\n    }\n\n    attributeChangedCallback(name, oldValue, newValue) {\n        console.log('attributeChangedCallback');\n        if (name === 'size' && oldValue !== newValue) {\n            this.new();\n            this.init();\n        }\n    }\n\n    init() {\n        if (!this.isConnected) return;\n\n        // Style\n        const styleElt = document.createElement(\"style\");\n        styleElt.textContent = _taquin_css__WEBPACK_IMPORTED_MODULE_2__[\"default\"];\n\n        // Taquin\n        this.taquinElt = document.createElement(\"div\");\n        this.taquinElt.classList.add(\"grid\");\n        this.taquinElt.style.setProperty(\"--size\", this.size);\n        const lastSize = this.size ** 2;\n        for (let i = 1; i < lastSize; i++) {\n            const tile = document.createElement(\"div\");\n            tile.classList.add(\"tile\")\n            tile.setAttribute('data-value', '' + i);\n            const span = document.createElement(\"span\");\n            tile.appendChild(span);\n            this.taquinElt.appendChild(tile);\n\n            span.addEventListener('click', () => {\n                if (span.hasAttribute('data-move')) {\n                    const move = +span.getAttribute('data-move');\n                    this.move(move);\n                }\n            });\n        }\n\n        // Left block\n        const asideElt = document.createElement(\"aside\");\n        const btnNewTaquin = createButtonElement('➕ New', 'newTaquin', () => this.new());\n        asideElt.appendChild(btnNewTaquin);\n        this.btnCheat = createButtonElement('🤖 Cheat', 'cheat', () => this.cheat());\n        asideElt.appendChild(this.btnCheat);\n        this.padElt = document.createElement('div');\n        asideElt.appendChild(this.padElt);\n        this.padElt.classList.add('pad');\n        const btnHole = createButtonElement('⚫️', 'hole');\n        btnHole.disabled = true;\n        this.padElt.appendChild(btnHole);\n        allMoves.forEach(move => {\n            const className = moveClassName[move];\n            const btn = createButtonElement(moveLabels[move], className, () => this.move(move))\n            this.buttons[className] = btn;\n            this.padElt.appendChild(btn);\n        });\n        asideElt.appendChild(this.padElt);\n        this.scoreElt = document.createElement('output');\n        this.scoreElt.classList.add('score');\n        asideElt.appendChild(this.scoreElt);\n\n        // Add all\n        const shadow = this.shadowRoot || this.attachShadow({mode: \"open\"});\n        shadow.innerHTML = '';\n        shadow.appendChild(styleElt);\n        shadow.appendChild(this.taquinElt);\n        shadow.appendChild(asideElt);\n\n        this.render();\n    }\n\n    new() {\n        const size = this.size;\n        console.log(`New taquin ${size}x${size}`);\n        this.taquin = taquin_rust_wasm__WEBPACK_IMPORTED_MODULE_0__[\"Taquin\"].new(size);\n        this.taquin.shuffle(size ** 4 * 2);\n        this.score = 0;\n        this.state = 'game';\n        this.render();\n    }\n\n    render() {\n        // State\n        if (this.shadowRoot && this.state) {\n            const toRemove = states.filter((it) => it === this.state);\n            this.shadowRoot.host.classList.remove(toRemove);\n            this.shadowRoot.host.classList.add(this.state);\n        }\n\n        // Grid\n        if (this.taquinElt) {\n            if (this.taquin) {\n                this.taquinElt.style.visibility = \"visible\";\n\n                let tilesPtr = this.taquin.tiles();\n                const tiles = new Uint8Array(taquin_rust_wasm_taquin_rust_wasm_bg__WEBPACK_IMPORTED_MODULE_1__[\"memory\"].buffer, tilesPtr, this.size * this.size);\n                for (let i = 0; i < tiles.length; i++) {\n                    const value = tiles[i];\n                    if (value !== 0) {\n                        const elt = this.taquinElt.childNodes.item(value - 1);\n                        if (elt) {\n                            const position = this.taquin.get_position(i);\n                            const {row, column} = position;\n                            elt.style.setProperty('--column', '' + column);\n                            elt.style.setProperty('--row', '' + row);\n                            const move = this.taquin.move_from_position(position);\n                            if (typeof move === 'undefined') {\n                                elt.removeAttribute(\"data-move\");\n                            } else {\n                                elt.setAttribute(\"data-move\", \"\" + move);\n                            }\n                        }\n                    }\n                }\n            } else {\n                this.taquinElt.style.visibility = \"hidden\";\n            }\n        }\n\n        // Cheat\n        if (this.btnCheat) {\n            this.btnCheat.style.visibility = this.state !== 'game' ? 'hidden' : 'visible';\n        }\n\n        // Score\n        if (this.scoreElt && typeof this.score === 'number') {\n            if (this.state == 'win') {\n                this.scoreElt.innerHTML = '🎉 ' + this.score;\n            } else {\n                switch (this.score) {\n                    case 0:\n                        this.scoreElt.innerHTML = '';\n                        break;\n                    case 1 :\n                        this.scoreElt.innerHTML = 'Move :' + this.score;\n                        break;\n                    default:\n                        this.scoreElt.innerHTML = 'Moves:' + this.score;\n                }\n            }\n        }\n\n        // Pad\n        if (this.padElt) {\n            this.padElt.style.visibility = this.state == \"game\" ? \"visible\" : \"hidden\";\n            if (this.taquin) {\n\n                Object.entries(this.buttons).forEach(([key, btn]) => {\n                    const hole = this.taquin.find_hole();\n                    switch (key) {\n                        case \"up\":\n                            btn.disabled = !this.taquin.is_valid(taquin_rust_wasm__WEBPACK_IMPORTED_MODULE_0__[\"Move\"].Up, hole);\n                            break;\n                        case \"right\":\n                            btn.disabled = !this.taquin.is_valid(taquin_rust_wasm__WEBPACK_IMPORTED_MODULE_0__[\"Move\"].Right, hole);\n                            break;\n                        case \"down\":\n                            btn.disabled = !this.taquin.is_valid(taquin_rust_wasm__WEBPACK_IMPORTED_MODULE_0__[\"Move\"].Down, hole);\n                            break;\n                        case \"left\":\n                            btn.disabled = !this.taquin.is_valid(taquin_rust_wasm__WEBPACK_IMPORTED_MODULE_0__[\"Move\"].Left, hole);\n                            break;\n                    }\n                });\n            }\n        }\n    }\n\n    move(move) {\n        if (!this.taquin) return;\n\n        const moved = this.taquin.move_hole(move);\n\n        this.state = this.taquin.is_solved() ? 'win' : 'game';\n        this.score += moved ? 1 : 0;\n\n        this.render();\n    }\n\n    cheat() {\n        console.log('Cheat');\n        const solution = this.taquin.solve();\n        let count = solution.size();\n        console.log('Solved in', count, 'moves');\n        const moves = new Uint8Array(taquin_rust_wasm_taquin_rust_wasm_bg__WEBPACK_IMPORTED_MODULE_1__[\"memory\"].buffer, solution.moves(), count);\n\n        let p = Promise.resolve();\n        for (let move of moves) {\n            p = p.then(() => delay(300, () => this.move(move)));\n        }\n    }\n}\n\n//# sourceURL=webpack:///./mkp-taquin.js?");

/***/ }),

/***/ "./taquin.css":
/*!********************!*\
  !*** ./taquin.css ***!
  \********************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony default export */ __webpack_exports__[\"default\"] = (\"\\n:host {\\n    display: flex;\\n    flex-direction: row;\\n    align-items: center;\\n    justify-content: space-around;\\n\\n    --gap: var(--taquin-gap, 4px);\\n    --tile: var(--taquin-tile, 10vmin);\\n\\n}\\n\\n/*Grid*/\\n.grid {\\n    background: var(--main);\\n    border: 2vmin solid var(--light-accent);\\n    border-radius: .25em;\\n    box-shadow: .125rem .125rem .25rem rgba(0,0,0,.5),\\n          inset .125rem .125rem .25rem rgba(0,0,0,.5);\\n\\n    position: relative;\\n    padding: var(--gap);\\n    box-sizing: content-box;\\n    width: calc((var(--gap) + var(--tile)) * var(--size, 1) - var(--gap));\\n    height: calc((var(--gap) + var(--tile)) * var(--size, 1) - var(--gap));\\n}\\n\\n.tile {\\n    position: absolute;\\n    display: flex;\\n    justify-content: center;\\n    align-items: center;\\n    background: var(--dark-accent);\\n    color: var(--light);\\n    border-radius: .25rem;\\n\\n    font-family: monospace;\\n    box-shadow: .125rem .125rem .25rem rgba(0,0,0,.5);\\n    cursor: not-allowed;\\n\\n    font-size: calc(.8 * var(--tile));\\n\\n    width: var(--tile);\\n    height: var(--tile);\\n\\n    top: calc(var(--gap) + (var(--gap) + var(--tile)) * var(--row, 0));\\n    left:calc(var(--gap) + (var(--gap) + var(--tile)) * var(--column, 0));\\n\\n    transition: all .1s;\\n}\\n\\n.tile[data-value='1'] span::after { content: '1'; }\\n.tile[data-value='2'] span::after { content: '2'; }\\n.tile[data-value='3'] span::after { content: '3'; }\\n.tile[data-value='4'] span::after { content: '4'; }\\n.tile[data-value='5'] span::after { content: '5'; }\\n.tile[data-value='6'] span::after { content: '6'; }\\n.tile[data-value='7'] span::after { content: '7'; }\\n.tile[data-value='8'] span::after { content: '8'; }\\n.tile[data-value='9'] span::after { content: '9'; }\\n.tile[data-value='10'] span::after { content: 'A'; }\\n.tile[data-value='11'] span::after { content: 'B'; }\\n.tile[data-value='12'] span::after { content: 'C'; }\\n.tile[data-value='13'] span::after { content: 'D'; }\\n.tile[data-value='14'] span::after { content: 'E'; }\\n.tile[data-value='15'] span::after { content: 'F'; }\\n\\n.tile span {\\n    font-size: 8vmin;\\n    font-weight: bold;\\n}\\n.tile span::after {\\n    background: var(--dark);\\n    color: transparent;\\n    text-shadow: 1px 1px 1px hsla(0, 100%, 100%, .5);\\n    background-clip: text;\\n}\\n\\n.tile[data-move='0'] { cursor: n-resize;}\\n.tile[data-move='1'] { cursor: e-resize;}\\n.tile[data-move='2'] { cursor: s-resize;}\\n.tile[data-move='3'] { cursor: w-resize;}\\n\\n/*Aside*/\\naside {\\n    margin-left: 1rem;\\n    display: flex;\\n    justify-content: space-around;\\n    align-items: center;\\n    flex-direction: column;\\n}\\n\\naside {\\n    font-size: 4vmin;\\n}\\n\\nbutton.newTaquin, button.cheat {\\n    border-radius: .25em;\\n    background: var(--dark-accent);\\n    color: var(--light);\\n    border-color: rgba(0,0,0,.25);\\n    margin: .5em;\\n}\\n\\naside button {\\n    font-size: inherit;\\n    cursor: pointer;\\n}\\naside button[disabled] {\\n    cursor: not-allowed;\\n}\\n\\naside .score {\\n    font-family: monospace;\\n}\\n\\naside .score:empty {\\n    visibility: hidden;\\n}\\n\\n/*pad*/\\n.pad {\\n    display: grid;\\n    grid-template-areas:\\n            \\\"q     down e\\\"\\n            \\\"right hole left\\\"\\n            \\\"z     up   c\\\";\\n}\\n\\n.pad button {\\n    border: none;\\n    width: 3ch;\\n    height: 3ch;\\n}\\n\\n.pad button.hole {\\n}\\n\\n.pad button.up {\\n    grid-area: up;\\n    border-bottom-left-radius: .25em;\\n    border-bottom-right-radius: .25em;\\n}\\n\\n.pad button.right {\\n    grid-area: right;\\n    border-top-left-radius: .25em;\\n    border-bottom-left-radius: .25em;\\n}\\n\\n.pad button.down {\\n    grid-area: down;\\n    border-top-left-radius: .25em;\\n    border-top-right-radius: .25em;\\n}\\n\\n.pad button.left {\\n    grid-area: left;\\n    border-top-right-radius: .25em;\\n    border-bottom-right-radius: .25em;\\n}\\n\\n.pad button.hole {\\n    grid-area: hole;\\n}\\n\");\n\n//# sourceURL=webpack:///./taquin.css?");

/***/ })

}]);